recipe:
  # Recipe metadata - defines this as a custom target type
  metadata:
    name: "Fibonacci Sequence"
    description: "Fibonacci sequence generator and filter"
    custom_type: "fibonacci sequence"
    version: "1.0.0"
    
  # Recipe parameters - these are the configurable values
  parameters:
    prefix: "fibonacci"
    display_name: "Fibonacci Sequence Generator"
    count: 10
    min_value: 0
    max_value: 1000000
    description: "Generates and filters fibonacci numbers"

  wants:
    # Fibonacci number generator - generates fibonacci sequence
    - metadata:
        type: fibonacci_numbers
        labels:
          role: generator
          component: source
      spec:
        params:
          count: count

    # Fibonacci sequence - filters fibonacci numbers by range
    - metadata:
        type: fibonacci_sequence
        labels:
          role: filter
          component: processor
      spec:
        params:
          min_value: min_value
          max_value: max_value
        using:
          - role: generator

  # Recipe result definition - specifies how to compute fibonacci results
  result:
    - want_name: "fibonacci_sequence"
      stat_name: ".total_processed"
      description: "Total numbers processed by fibonacci filter"
    - want_name: "fibonacci_numbers"
      stat_name: ".total_processed"
      description: "Total fibonacci numbers generated"
    - want_name: "fibonacci_sequence"
      stat_name: "."
      description: "All metrics from fibonacci sequence filter"